Billing				=<billing_id_here>
seed_project 		=<seed_project_name_here>
PROJECT				=<new_project_id_here>
ORG					=<org_id_here>
tfstate bucket 		=<credentials>.json
service account 	=<tfstate_bucket_here>

# Get the system requirements
sudo apt-get update
sudo apt-get install unzip
wget https://releases.hashicorp.com/terraform/0.11.13/terraform_0.11.13_linux_amd64.zip && echo "downloaded"

unzip terraform_0.11.13_linux_amd64.zip && echo "unzipped"
sudo mv terraform /usr/local/bin/
terraform --version
# Git Clone
git clone https://github.com/Burwood/UCHI-GCP.git

# Copy secrets and navigate to tfvars to edit
cd UCHI-GCP/GCP
git checkout phase1
git branch
cd phase1/roots/csoc_setup/org_setup
gsutil cp -r gs://<tfstate_bucket_here>/<credentials.json> .
cd variables
vi csoc-setup.tfvars


<edit csoc-setup.tfvars>



cd ..
terraform init -input=false -force-copy -upgrade -verify-plugins=true -backend=true \
-backend-config="bucket=<tfstate_bucket_here>" \
-backend-config="credentials=<credentials>.json" \
-backend-config="region=us-central1" \
-backend-config="project=<seed_project_name_here>" \
-backend-config="prefix=org_setup_csoc"
terraform workspace new csoc_setup
terraform apply -var-file=variables/csoc-setup.tfvars


...wait for project to build


cp project-factory-4921.json ../project_setup
cd ../project_setup/variables
vi csoc-setup.tfvars




<edit variables>


cd ..
terraform init -input=false -force-copy -upgrade -verify-plugins=true -backend=true \
-backend-config="bucket=<tfstate_bucket_here>" \
-backend-config="credentials=<credentials>.json" \
-backend-config="region=us-central1" \
-backend-config="project=<seed_project_name_here>" \
-backend-config="prefix=project_setup_csoc"
terraform workspace select csoc_setup
terraform apply -var-file=variables/csoc-setup.tfvars

rm -rf .terraform -- to remove local cache if run into problems.
